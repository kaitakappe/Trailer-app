# Trailer App

ライト・トレーラ連結仕様検討、車軸強度、車枠強度、安定角、最小回転半径などの計算ツール（wxPython GUI）。

**NEW**: 第1号様式（組立車等届出書）の自動記入・発行機能を追加しました！

## セットアップ (Windows)

```powershell
# リポ取得
Set-Location "C:\Users\takas\Documents\GitHub"
git clone https://github.com/kaitakappe/Trailer-app.git
Set-Location Trailer-app

# 仮想環境
python -m venv .venv
.\.venv\Scripts\Activate.ps1

# 依存関係
pip install -U pip
pip install -r requirements.txt
```

日本語フォントをPDFに埋め込むため `ipaexg.ttf` をリポ直下に配置済みです。ReportLab で自動検出されます。

## 実行

VS Code のデバッグ構成「Python: Run main.py」から実行、または下記を実行します。

```powershell
& ".\.venv\Scripts\python.exe" ".\main.py"
```

## PDF 出力

- ReportLab を使用しています。出力後は既定アプリで自動オープンします（Windows）。
- 連結仕様検討書は、車両情報（車名・型式・登録番号・シリアル番号・車体の形状）と諸元表、各判定の式展開を1ページに出力します。

## 第1号様式（組立車等届出書）機能

最後のタブ「第1号様式（組立車等届出書）」から申請書類を発行できます。

### 機能概要

1. **自動入力**: 「計算結果から自動入力」ボタンで、全ての計算書の結果から必要事項を自動的に記入
   - 重量計算から: 車両重量、車両総重量、前軸重、後軸重
   - トレーラ諸元から: 長さ、幅、高さ、ホイールベース、トレッド
   - 車軸強度から: 車軸数
   
2. **手動入力**: 全てのフィールドは手動で編集可能
   - 申請者情報（氏名、住所、申請日）
   - 車両基本情報（種別、名称、型式）
   - 寸法情報（長さ、幅、高さなど）
   - 重量情報（車両重量、車両総重量など）
   - 車軸情報（車軸数、前軸重、後軸重）
   - 備考

3. **プレビュー**: 「プレビュー」ボタンで記入内容を確認

4. **PDF発行**: 「PDF発行...」ボタンでPDFを生成
   - テンプレートPDFがあればオーバーレイ方式で記入
   - テンプレートがない場合は新規作成
   - テンプレート検索パス:
     - デスクトップ/2025-1119-九州運輸局より/申請書等/【基本】組立車　第１号様式.pdf
     - ドキュメント/2025-1119-九州運輸局より/申請書等/【基本】組立車　第１号様式.pdf
     - プロジェクトフォルダ/templates/【基本】組立車　第１号様式.pdf
     - 現在のディレクトリ/【基本】組立車　第１号様式.pdf

### 使い方

1. まず各計算タブで必要な計算を実行
2. 「第1号様式（組立車等届出書）」タブを開く
3. 「計算結果から自動入力」をクリック
4. 申請者情報や不足している項目を手動で入力
5. 「プレビュー」で内容を確認
6. 「PDF発行...」でPDFを保存

### プロジェクト保存

第1号様式の入力内容もプロジェクトファイル（.json）に保存されるため、後から編集を再開できます。

## 開発メモ

- VS Code ワークスペース設定は `.vscode/` と `Trailer-app.code-workspace` に含まれます。
- 依存関係: `wxPython`, `reportlab`, `PyPDF2`
- Python バージョン: 3.10 以降を推奨
- 第1号様式機能は `lib/form_issuer.py` に実装

## ライセンス

プロジェクトルートの LICENSE がないため、私用目的での利用を前提としています。必要ならライセンスを追加してください。
